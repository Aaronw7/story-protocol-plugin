document.getElementById("mintNftButton").addEventListener("click",(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"checkEthereum"},(function(o){o&&o.ethereumAvailable?(console.log("this is the response: ",o),chrome.tabs.sendMessage(e[0].id,{action:"requestVideoDetails"},(async function(o){try{console.log("this is the response: ",o);const t=await fetch("https://story-protocol-plugin.vercel.app/api/generateTokenUri",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o.title,description:o.description,videoUrl:o.videoUrl})});if(!t.ok)throw new Error("Server error occurred");console.log("does it get here?");const{tokenUri:n}=await t.json();console.log("Token URI:",n),chrome.tabs.sendMessage(e[0].id,{action:"mintNFT",tokenUri:n}),console.log("how about here?")}catch(e){console.error("Error:",e)}}))):alert("Please install MetaMask or another Ethereum wallet.")}))}))}));